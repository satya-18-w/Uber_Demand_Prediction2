schema: '2.0'
stages:
  data_ingestion:
    cmd: python ./src/data/data_ingestion.py
    deps:
    - path: ./src/data/data_ingestion.py
      hash: md5
      md5: 32ebb9cfdca6e920e64ca1aac8557a80
      size: 3281
  build_features:
    cmd: python ./src/features/build_features.py
    deps:
    - path: ./src/features/build_features.py
      hash: md5
      md5: d162ed13c52bb272cf81af256308607e
      size: 4932
    params:
      params.yaml:
        build_features.ewma.alpha: 0.43
        build_features.mini_batch_kmeans.n_clusters: 30
        build_features.mini_batch_kmeans.n_init: 13
        build_features.mini_batch_kmeans.random_state: 42
    outs:
    - path: ./data/external/plot_data.csv
      hash: md5
      md5: 36121fca95c77423558399ce1d72cd55
      size: 686907
    - path: ./models/mb_kmeans.joblib
      hash: md5
      md5: 7ac88d1c51f0b626b8c73f3243715f98
      size: 143771
    - path: ./models/scaler.joblib
      hash: md5
      md5: 7c435d4d8f09e63576b98dbb37a98fcc
      size: 951
  extract_feature:
    cmd: python ./src/features/extract_feature.py
    deps:
    - path: ./data/processed/resampled_data.csv
      hash: md5
      md5: b35fd493c35c5860b474f619baf295dd
      size: 8464274
    - path: ./src/features/extract_feature.py
      hash: md5
      md5: a633d0aef46e6312a02a53c38fcd69f6
      size: 1802
    outs:
    - path: ./data/processed/test_data.csv
      hash: md5
      md5: 58512f9cf6907bc8ae0be980f5dfb0bd
      size: 4970896
    - path: ./data/processed/train_data.csv
      hash: md5
      md5: 8631f72f1a736b54a4bb39cdb56df015
      size: 9579566
  train_model:
    cmd: python ./src/models/train_model.py  ./data/processed/train_data.csv 
      ./data/processed/test_data.csv
    deps:
    - path: ./data/processed/test_data.csv
      hash: md5
      md5: 58512f9cf6907bc8ae0be980f5dfb0bd
      size: 4970896
    - path: ./data/processed/train_data.csv
      hash: md5
      md5: 8631f72f1a736b54a4bb39cdb56df015
      size: 9579566
    - path: ./src/models/train_model.py
      hash: md5
      md5: 668ac0335b3bd16b1eada6fd0249c493
      size: 4881
    outs:
    - path: ./models/best_model.joblib
      hash: md5
      md5: 87269a6d056e717126600e4de22502b3
      size: 252639729
    - path: ./models/encoder.joblib
      hash: md5
      md5: cd4bb035eefe6ebe0644686ff3d0007f
      size: 3138
    - path: ./reports/experiment_info.json
      hash: md5
      md5: a7852bfa3a4c20a9352c88dc6580c8b5
      size: 148
  register_model:
    cmd: python ./src/models/register_model.py
    deps:
    - path: ./src/models/register_model.py
      hash: md5
      md5: 0d1a8a4093998c75c77e882a901dee53
      size: 2879
