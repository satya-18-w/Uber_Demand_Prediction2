schema: '2.0'
stages:
  data_ingestion:
    cmd: python ./src/data/data_ingestion.py
    deps:
    - path: ./src/data/data_ingestion.py
      hash: md5
      md5: 32ebb9cfdca6e920e64ca1aac8557a80
      size: 3281
  build_features:
    cmd: python ./src/features/build_features.py
    deps:
    - path: ./src/features/build_features.py
      hash: md5
      md5: d162ed13c52bb272cf81af256308607e
      size: 4932
    params:
      params.yaml:
        build_features.ewma.alpha: 0.456
        build_features.mini_batch_kmeans.n_clusters: 30
        build_features.mini_batch_kmeans.n_init: 15
        build_features.mini_batch_kmeans.random_state: 42
    outs:
    - path: ./data/external/plot_data.csv
      hash: md5
      md5: c35bd6a730d0713d19c0317f35412036
      size: 686630
    - path: ./models/mb_kmeans.joblib
      hash: md5
      md5: eaf6d46b8cbec07c7fc40308a65faa2e
      size: 143771
    - path: ./models/scaler.joblib
      hash: md5
      md5: 7c435d4d8f09e63576b98dbb37a98fcc
      size: 951
  extract_feature:
    cmd: python ./src/features/extract_feature.py
    deps:
    - path: ./data/processed/resampled_data.csv
      hash: md5
      md5: e7ed50e7b0456b9f7c659884c1c4156a
      size: 8463995
    - path: ./src/features/extract_feature.py
      hash: md5
      md5: a633d0aef46e6312a02a53c38fcd69f6
      size: 1802
    outs:
    - path: ./data/processed/test_data.csv
      hash: md5
      md5: d4fb4bf9e40e302ef52651c6ea503b2d
      size: 4970786
    - path: ./data/processed/train_data.csv
      hash: md5
      md5: ea8c652b978970f7de7b2638696c3a18
      size: 9579397
  train_model:
    cmd: python ./src/models/train_model.py  ./data/processed/train_data.csv 
      ./data/processed/test_data.csv
    deps:
    - path: ./data/processed/test_data.csv
      hash: md5
      md5: d4fb4bf9e40e302ef52651c6ea503b2d
      size: 4970786
    - path: ./data/processed/train_data.csv
      hash: md5
      md5: ea8c652b978970f7de7b2638696c3a18
      size: 9579397
    - path: ./src/models/train_model.py
      hash: md5
      md5: 668ac0335b3bd16b1eada6fd0249c493
      size: 4881
    outs:
    - path: ./models/best_model.joblib
      hash: md5
      md5: f49a3d779924a5652ccf71cfb6a0e4e5
      size: 207359889
    - path: ./models/encoder.joblib
      hash: md5
      md5: cd4bb035eefe6ebe0644686ff3d0007f
      size: 3138
    - path: ./reports/experiment_info.json
      hash: md5
      md5: ce3550e8f342346bad7c99e7ce77152c
      size: 148
  register_model:
    cmd: python ./src/models/register_model.py
    deps:
    - path: ./src/models/register_model.py
      hash: md5
      md5: 0d1a8a4093998c75c77e882a901dee53
      size: 2879
